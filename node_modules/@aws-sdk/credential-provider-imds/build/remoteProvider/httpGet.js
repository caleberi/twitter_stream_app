"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var buffer_1 = require("buffer");
var http_1 = require("http");
var property_provider_1 = require("@aws-sdk/property-provider");
/**
 * @internal
 */
function httpGet(options) {
    return new Promise(function (resolve, reject) {
        var request = http_1.get(options);
        request.on("error", function (err) {
            reject(new property_provider_1.ProviderError("Unable to connect to instance metadata service"));
        });
        request.on("response", function (res) {
            var _a = res.statusCode, statusCode = _a === void 0 ? 400 : _a;
            if (statusCode < 200 || 300 <= statusCode) {
                reject(new property_provider_1.ProviderError("Error response received from instance metadata service"));
            }
            var chunks = [];
            res.on("data", function (chunk) {
                chunks.push(chunk);
            });
            res.on("end", function () {
                resolve(buffer_1.Buffer.concat(chunks));
            });
        });
    });
}
exports.httpGet = httpGet;
//# sourceMappingURL=httpGet.js.map